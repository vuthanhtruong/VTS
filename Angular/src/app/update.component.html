<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta charset="utf-8" />
  <title>Cập nhật chứng từ ghi giảm TSCĐ</title>
</head>
<body>
<div class="form-page">
  <!-- Header -->
  <img class="header-menu" src="https://c.animaapp.com/mfm15dyimNLwos/img/1920---with-menu-1.png" alt="Header Menu" />

  <!-- Sidebar -->
  <div class="sidebar">
    <div class="sidebar-content">
      <div class="menu-item active">
        <img class="menu-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/pie-chart--1--1.svg" alt="Tổng quan" />
        <div class="menu-text">Tổng quan</div>
      </div>
      <div class="menu-item expandable">
        <img class="menu-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-menu-outline-apps-01.svg" alt="Danh mục" />
        <div class="menu-text">Danh mục</div>
        <img class="expand-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01-6.svg" alt="Expand" />
      </div>
      <div class="submenu-item">Nguồn hình thành</div>
      <div class="submenu-item">Nhóm TSCĐ</div>
      <div class="submenu-item">Nguồn gốc tăng TSCĐ</div>
      <div class="submenu-item">Quản lý phòng ban</div>
      <div class="submenu-item">Nhóm CCDC</div>
      <div class="submenu-item">Công cụ dụng cụ</div>
      <div class="submenu-item">Lý do tăng CCDC</div>
      <div class="submenu-item">Lý do giảm CCDC</div>
      <div class="submenu-item">Mục đích sử dụng</div>
      <div class="submenu-item">Hình thức mua sắm</div>
      <div class="submenu-item">Phương thức mua sắm</div>
      <div class="submenu-item">Nhà cung cấp</div>
      <div class="submenu-item">Khách hàng</div>
      <div class="menu-item expandable">
        <img class="menu-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/asset-1-1.svg" alt="Tài sản cố định" />
        <div class="menu-text">Tài sản cố định</div>
        <img class="expand-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Expand" />
      </div>
      <div class="menu-item expandable">
        <img class="menu-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/settings-1.svg" alt="Công cụ dụng cụ" />
        <div class="menu-text">Công cụ dụng cụ</div>
        <img class="expand-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Expand" />
      </div>
      <div class="menu-item expandable">
        <img class="menu-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/solar-chart-2-broken.svg" alt="Báo cáo" />
        <div class="menu-text">Báo cáo</div>
        <img class="expand-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Expand" />
      </div>
      <div class="menu-item expandable">
        <img class="menu-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-interface-outline-search-03.svg" alt="Tra cứu" />
        <div class="menu-text">Tra cứu</div>
        <img class="expand-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Expand" />
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <!-- Breadcrumb -->
    <div class="breadcrumb">
      <div class="breadcrumb-items">
        <div class="breadcrumb-home"></div>
        <img class="breadcrumb-arrow" src="https://c.animaapp.com/mfm15dyimNLwos/img/chevron-right.svg" alt="Arrow" />
        <div class="breadcrumb-link">Tài sản cố định</div>
        <img class="breadcrumb-arrow" src="https://c.animaapp.com/mfm15dyimNLwos/img/chevron-right.svg" alt="Arrow" />
        <div class="breadcrumb-link">Ghi giảm tài sản cố định</div>
      </div>
      <div class="page-title">
        <img class="back-arrow" src="https://c.animaapp.com/mfm15dyimNLwos/img/right-arrow-1.svg" (click)="onCancel()" alt="Back" />
        <h1>Cập nhật chứng từ ghi giảm TSCĐ</h1>
      </div>
    </div>

    <!-- Error Message -->
    <div *ngIf="error" class="error">{{ error }}</div>

    <!-- Loading State -->
    <div *ngIf="isLoadingAssets || isLoadingReasons || isLoadingEmployees" class="loading">Đang tải dữ liệu...</div>

    <!-- Form Content -->
    <form (ngSubmit)="onSubmit()" class="form-content" *ngIf="!error && !isLoadingAssets && !isLoadingReasons && !isLoadingEmployees">
      <!-- Asset Information Section -->
      <div class="form-section">
        <div class="section-header">
          <h2>Thông tin tài sản</h2>
          <img class="collapse-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/down-filled-triangular-arrow--2--1.svg" alt="Collapse" />
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Tên tài sản*</label>
            <div class="input-with-icon">
              <select [(ngModel)]="formData.assetFixedId" name="assetFixedId" required>
                <option value="" disabled>Chọn tên tài sản</option>
                <option *ngFor="let asset of assets" [value]="asset.assetFixedId">{{ asset.name }}</option>
              </select>
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Dropdown" />
            </div>
          </div>
          <div class="form-group">
            <label>Người lập phiếu</label>
            <div class="input-with-icon">
              <select [(ngModel)]="formData.voucherUserId" name="voucherUserId" required>
                <option value="" disabled>Chọn người lập phiếu</option>
                <option *ngFor="let employee of employees" [value]="employee.employeeId">{{ employee.employeeName }}</option>
              </select>
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Dropdown" />
            </div>
          </div>
        </div>
      </div>

      <!-- Document Section -->
      <div class="form-section">
        <div class="section-header">
          <h2>Chứng từ</h2>
          <img class="collapse-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/down-filled-triangular-arrow--2--1.svg" alt="Collapse" />
        </div>
        <div class="form-row">
          <div class="form-group half-width">
            <label>Ngày CT*</label>
            <div class="input-with-icon">
              <input type="date" [(ngModel)]="formData.voucherDate" name="voucherDate" required />
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-time-and-date-outline-calendar-add.svg" alt="Calendar" />
            </div>
          </div>
          <div class="form-group half-width">
            <label>Số CT*</label>
            <input type="text" [(ngModel)]="formData.code" name="code" placeholder="Nhập số CT" required />
          </div>
        </div>
      </div>

      <!-- Reduction Information Section -->
      <div class="form-section">
        <div class="section-header">
          <h2>Thông tin ghi giảm</h2>
          <img class="collapse-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/down-filled-triangular-arrow--2--1.svg" alt="Collapse" />
        </div>
        <div class="form-row">
          <div class="form-group half-width">
            <label>Số QĐ</label>
            <input type="text" [(ngModel)]="formData.decisionNo" name="decisionNo" placeholder="Nhập số QĐ" />
          </div>
          <div class="form-group half-width">
            <label>Ngày QĐ</label>
            <div class="input-with-icon">
              <input type="date" [(ngModel)]="formData.decisionDate" name="decisionDate" />
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-time-and-date-outline-calendar-add.svg" alt="Calendar" />
            </div>
          </div>
          <div class="form-group">
            <label>HT xử lý*</label>
            <div class="input-with-icon">
              <select [(ngModel)]="formData.type" name="type" required>
                <option value="" disabled>Chọn hình thức xử lý</option>
                <option value="1">Thanh lý</option>
                <option value="2">Khác</option>
              </select>
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Dropdown" />
            </div>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group half-width">
            <label>Số hóa đơn</label>
            <input type="text" [(ngModel)]="formData.invoiceNo" name="invoiceNo" placeholder="Nhập số hóa đơn" />
          </div>
          <div class="form-group half-width">
            <label>Ngày hóa đơn</label>
            <div class="input-with-icon">
              <input type="date" [(ngModel)]="formData.invoiceDate" name="invoiceDate" />
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-time-and-date-outline-calendar-add.svg" alt="Calendar" />
            </div>
          </div>
          <div class="form-group">
            <label>Lý do giảm*</label>
            <div class="input-with-icon">
              <select [(ngModel)]="formData.assetFixedDecreaseReasonId" name="assetFixedDecreaseReasonId" required>
                <option value="" disabled>Chọn lý do giảm</option>
                <option *ngFor="let reason of reasons" [value]="reason.assetFixedDecreaseReasonId">{{ reason.name }}</option>
              </select>
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Dropdown" />
            </div>
          </div>
        </div>
      </div>

      <!-- Asset Liquidation Section -->
      <div class="form-section">
        <div class="section-header">
          <h2>Thu thanh lý TSCĐ</h2>
          <img class="collapse-icon" src="https://c.animaapp.com/mfm15dyimNLwos/img/down-filled-triangular-arrow--2--1.svg" alt="Collapse" />
        </div>
        <div class="form-row">
          <div class="form-group half-width">
            <label>Thu từ ghi giảm</label>
            <input type="number" [(ngModel)]="formData.decRev" name="decRev" placeholder="Nhập thu từ ghi giảm" step="0.01" />
          </div>
          <div class="form-group half-width">
            <label>Đã nộp TK TG</label>
            <input type="number" [(ngModel)]="formData.depAccPaid" name="depAccPaid" placeholder="Nhập đã nộp TK TG" step="0.01" />
          </div>
          <div class="form-group">
            <label>Chưa nộp TK TG</label>
            <input type="number" [(ngModel)]="formData.depAccUnpaid" name="depAccUnpaid" placeholder="Nhập chưa nộp TK TG" step="0.01" />
          </div>
          <div class="form-group">
            <label>Chi phí xử lý TS</label>
            <div class="input-with-icon">
              <input type="number" [(ngModel)]="formData.assetProcCost" name="assetProcCost" placeholder="Nhập chi phí xử lý TS" step="0.01" />
              <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-arrows-outline-direction-down-01.svg" alt="Dropdown" />
            </div>
          </div>
        </div>
      </div>

      <!-- Description Section -->
      <div class="form-section">
        <div class="form-group full-width">
          <label>Mô tả</label>
          <div class="textarea-container">
            <textarea [(ngModel)]="formData.description" name="description" placeholder="Nhập mô tả" maxlength="255"></textarea>
            <div class="char-count">{{ formData.description?.length || 0 }}/255</div>
          </div>
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="form-actions">
        <div class="left-actions">
          <button type="button" class="btn btn-outline">
            <img src="https://c.animaapp.com/mfm15dyimNLwos/img/icon-interface-outline-help.svg" alt="Help" />
            Trợ giúp
          </button>
        </div>
        <div class="right-actions">
          <button type="button" class="btn btn-outline" (click)="onCancel()">
            <img src="https://c.animaapp.com/mfm15dyimNLwos/img/plus-1.svg" alt="Cancel" />
            Hủy bỏ
          </button>
          <button type="submit" class="btn btn-primary">
            <img src="https://c.animaapp.com/mfm15dyimNLwos/img/teenyicons-tick-circle-outline.svg" alt="Confirm" />
            Xác nhận
          </button>
        </div>
      </div>
    </form>
  </div>
</div>
</body>
</html>
